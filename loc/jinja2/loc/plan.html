{% extends 'base.html' %}
{% import 'loc/macros/objects.html' as obj %}
{% import 'loc/macros/plan.html' as f %}
{% from 'loc/macros/planlist.html' import planlist %}

{% block title %}Plan View{% endblock %}

{% block content %}
<p>
  Plan <i>{{ plan.name }}</i>
  {% if plan.level is not none %}
  on level {{plan.level}}
  {% endif %}
  {% if parent %}
  of <a href="{{ url('loc:plan', args=[parent.id]) }}">{{ parent }}</a>
  {% endif %}
</p>

<div id="building_nav">
  <p>{% if plan.lower_floor %}Down: {{ obj.floor_link(plan.lower_floor) }}{% endif %}</p>
  <p>
    {% if plan.upper_floor %}
    Up: {{ obj.floor_link(plan.upper_floor) }}
    {% endif %}
  </p>
</div>

{{ f.plan(plan, teleports, with_zoom=True) }}

<p><a href="{{ url('loc:plan_add_tp', args=[plan.id]) }}">Add Teleport</a></tp>

{% if parent %}
<p><b>Parent:</b> <a href="{{ url('loc:plan', args=[parent.id]) }}">{{
    parent.name }}</a></p>
{% endif %}

{% if sub_plans %}
<p><b>Details</b></p>
{{ planlist(sub_plans) }}
{% endif %}


{% endblock %}
